(self.webpackChunkvue3=self.webpackChunkvue3||[]).push([[535],{2324:function(e,t,n){"use strict";n.d(t,{x:function(){return u},E:function(){return s}});n(1539),n(8674);var r=n(9669),o=n.n(r);n(129);o().defaults.timeout=12e3,o().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",o().interceptors.request.use((function(e){return e}),(function(e){return Promise.error(e)})),o().interceptors.response.use((function(e){return 200===e.status&&0===e.data.code?Promise.resolve(e):Promise.reject(e)}),(function(e){e.response.status;return Promise.reject(e.response)}));var a={};function u(e){return function(e,t){return o().defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",new Promise((function(n,r){o().post(e,t,{headers:{token:""}}).then((function(e){n(e.data||e)})).catch((function(e){r(e)}))}))}(a.$api.login,e)}function s(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){o().get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){r(e)}))}))}(a.$api.user,e)}a.$version="1.0.0",a.$apiServer={baseApi:"https://www.fastmock.site",apiUser:"http://www.mockhttp.cn"},a.$api={login:"".concat(a.$apiServer.baseApi,"/mock/973ec681e817a650ec18f8fb17af90e8/user/login"),user:"".concat(a.$apiServer.apiUser,"/mock/user11")}},3095:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(2005),o={class:"login"},a={class:"login-title"},u={style:{margin:"16px"}},s=(0,r.createTextVNode)(" 提交 ");n(3250);var i=n(8118),c=(n(5666),n(4916),n(5306),n(1539),n(8674),n(7957)),l=n(4404),p=n(2324);function d(e,t,n,r,o,a,u){try{var s=e[a](u),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(r,o)}var f=(0,r.defineComponent)({name:"login",setup:function(){var e=(0,l.useRouter)(),t=(0,l.useRoute)(),n=(0,c.useStore)();return{title:(0,r.ref)("渐进式JavaScript 框架-登录"),state:(0,r.reactive)({username:"",password:""}),onSubmit:function(){var r,o=(r=regeneratorRuntime.mark((function r(o){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i.Z.loading({duration:0,message:"加载中...",forbidClick:!0}),r.next=4,(0,p.x)(o);case 4:a=r.sent,i.Z.clear(),0==a.code&&(n.commit("LOGIN",{data:a.data}),(0,i.Z)("登录成功"),setTimeout((function(){var n=t.query.fullPath||"/";e.replace({path:n})}),2e3)),r.next=11;break;case 9:r.prev=9,r.t0=r.catch(0);case 11:case"end":return r.stop()}}),r,null,[[0,9]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function u(e){d(a,n,o,u,s,"next",e)}function s(e){d(a,n,o,u,s,"throw",e)}u(void 0)}))});return function(e){return o.apply(this,arguments)}}()}}});f.render=function(e,t,n,i,c,l){var p=(0,r.resolveComponent)("van-field"),d=(0,r.resolveComponent)("van-button"),f=(0,r.resolveComponent)("van-form");return(0,r.openBlock)(),(0,r.createBlock)("div",o,[(0,r.createVNode)("p",a,(0,r.toDisplayString)(e.title),1),(0,r.createVNode)(f,{onSubmit:e.onSubmit,class:"form-wrap"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:e.state.username,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.state.username=t}),name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),(0,r.createVNode)(p,{modelValue:e.state.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.state.password=t}),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),(0,r.createVNode)("div",u,[(0,r.createVNode)(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,r.withCtx)((function(){return[s]})),_:1})])]})),_:1},8,["onSubmit"])])};var m=f}}]);